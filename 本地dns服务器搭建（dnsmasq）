dnsmasq安装配置


在本地dns服务的机器（192.168.56.101）
sudo yum -y install dnsmasq

sudo vi /etc/dnsmasq.conf
修改以下内容

resolv-file=/etc/resolv.conf
strict-order
#listen-address=192.168.56.101
address=/fcc.com/192.168.56.104
server=114.114.114.114
bogus-nxdomain=114.114.114.114
expand-hosts
domain=fc.com

sudo vi /etc/hosts
192.168.56.102 host1
192.168.56.103 host2

sudo  dnsmasq --no-daemon --log-queries --log-facility=/var/log/dnsmasq.log


在另外一台机器上配置本地dns服务地址

sudo vi /etc/resolv.conf
# Generated by NetworkManager
nameserver 192.168.56.101

测试验证

ping host1.fc.com   #从/etc/hosts里取的，192.168.56.102 /etc/dnsmasq.conf里的domain=fc.com
ping www.fcc.com    #泛域名  /etc/dnsmasq.conf里的address=/fcc.com/192.168.56.104


也可以在路由器里配置


